all:
  dependencies:
    - pipeline: ./activities/social_services/historic_data
  pipeline:
    - run: load
      parameters:
        from: /var/datapackages/activities/social_services/historic_data/datapackage.json
    - run: concatenate
      parameters:
        target:
          name: activities
          path: activities.csv
        fields:
          kind: []
          kind_he: []
          activity_name: []
          activity_description: []
          publisher_name: []
          history: []
          max_year: []
          min_year: []
    - run: set_primary_key
      parameters:
        activities:
          - kind
          - publisher_name
          - activity_name
    - run: dump_to_path
      parameters:
        out-path: /var/datapackages/activities/all
    - run: dump_to_sql
      parameters:
        tables:
          activities:
            resource-name: activities
