all-appointments:
  dependencies:
    - pipeline: ./people/appointments/media/themarker

  pipeline:
    -
      run: add_metadata
      parameters:
        name: all-appointment-data
        title: Appointment data from various sources

    -
      run: load_resource
      parameters:
        url: /var/datapackages/people/appointments/media/themarker/datapackage.json
        resource: 0

    -
      run: load_resource
      parameters:
        url: /var/datapackages/people/appointments/media/calcalist/datapackage.json
        resource: nominations-list
    -
      run: concatenate
      parameters:
        sources: ['cancat', 'nominations-list']
        target:
          name: appointments
        fields:
          full_name: ['name', 'full_name']
          company: []
          date: []
          position: ['title', 'description']
          details: []
          gender: []
          proof_url: []
    -
      run: dump.to_path
      parameters:
          out-path: /var/datapackages/people/appointments/all
